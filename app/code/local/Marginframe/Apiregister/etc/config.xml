<?xml version="1.0"?>
<config>
    <modules>
        <Marginframe_Apiregister>
            <version>0.1.0</version>
        </Marginframe_Apiregister>
    </modules>
    <global>
        <models>
            <Marginframe_Apiregister>
                <class>Marginframe_Apiregister_Model</class>
            </Marginframe_Apiregister>
        </models>
        <helpers>
            <Marginframe_Apiregister>
                <class>Marginframe_Apiregister_Helper</class>
            </Marginframe_Apiregister>
        </helpers>
        <resources>
            <apiregister_setup>
                <setup>
                    <module>Marginframe_Apiregister</module>
                    <class>Mage_Customer_Model_Resource_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </apiregister_setup>
            <apiregister_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </apiregister_write>
            <apiregister_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </apiregister_read>
        </resources>
        <events>
            <customer_register_success>
                <observers>
                    <Marginframe_Apiregister_customer_register_success>
                        <type>model</type>
                        <class>Marginframe_Apiregister/observer</class>
                        <method>customerRegisterSuccess</method>
                    </Marginframe_Apiregister_customer_register_success>
                </observers>
            </customer_register_success>
            <customer_login>
                <observers>
                    <Marginframe_Apiregister_customer_login_save_point>
                        <type>model</type>
                        <class>Marginframe_Apiregister/observer</class>
                        <method>loginsavepoint</method>
                    </Marginframe_Apiregister_customer_login_save_point>
                </observers>
            </customer_login>
            <customer_update_app>
                <observers>
                    <Marginframe_Apiregister_customer_update_app>
                        <type>model</type>
                        <class>Marginframe_Apiregister/observer</class>
                        <method>customerUpdateApp</method>
                    </Marginframe_Apiregister_customer_update_app>
                </observers>
            </customer_update_app>
            <sales_order_save_after>
                <observers>
                    <Marginframe_Apiregister_customer_add_date_vip_expire>
                        <type>model</type>
                        <class>Marginframe_Apiregister/observer</class>
                        <method>adddatevipexpire</method>
                    </Marginframe_Apiregister_customer_add_date_vip_expire>
                </observers>
            </sales_order_save_after>
            <sales_order_save_after>
                <observers>
                    <Marginframe_Apiregister_customer_addpoint_complete>
                        <type>model</type>
                        <class>Marginframe_Apiregister/observer</class>
                        <method>addpoint_complete</method>
                    </Marginframe_Apiregister_customer_addpoint_complete>
                </observers>
            </sales_order_save_after>
            <sales_order_save_after>
                <observers>
                    <Marginframe_Apiregister_customer_removepoint_complete>
                        <type>model</type>
                        <class>Marginframe_Apiregister/observer</class>
                        <method>removepoint_complete</method>
                    </Marginframe_Apiregister_customer_removepoint_complete>
                </observers>
            </sales_order_save_after>
            <raffle_use_point>
                <observers>
                    <Marginframe_Apiregister_customer_raffle_use_point>
                        <type>model</type>
                        <class>Marginframe_Apiregister/observer</class>
                        <method>raffle_use_point</method>
                    </Marginframe_Apiregister_customer_raffle_use_point>
                </observers>
            </raffle_use_point>
        </events>
    </global>
    <frontend>
        <routers>
            <routerfrontend>
                <use>standard</use>
                <args>
                    <module>Marginframe_Apiregister</module>
                    <frontName>apiregister</frontName>
                </args>
            </routerfrontend>
            <customer>
                <args>
                    <modules>
                        <Marginframe_Apiregister before="Mage_Customer_AccountController">Marginframe_Apiregister</Marginframe_Apiregister>
                        <Marginframe_Apiregister before="Mage_Customer_AddressController">Marginframe_Apiregister</Marginframe_Apiregister>
                    </modules>
                </args>
            </customer>
        </routers>
        <events>
            <customer_register_success>
                <observers>
                    <Marginframe_Apiregister_customer_register_success>
                        <type>model</type>
                        <class>Marginframe_Apiregister/observer</class>
                        <method>customerRegisterSuccess</method>
                    </Marginframe_Apiregister_customer_register_success>
                </observers>
            </customer_register_success>
            <customer_facebook_register_success>
                <observers>
                    <Marginframe_Apiregister_customer_facebook_register_success>
                        <type>model</type>
                        <class>Marginframe_Apiregister/observer</class>
                        <method>customerRegisterSuccess</method>
                    </Marginframe_Apiregister_customer_facebook_register_success>
                </observers>
            </customer_facebook_register_success>
        </events>
    </frontend>
    <crontab>
        <jobs>
            <checkvip_expire>
                <schedule>
                    <cron_expr>0 0 * * *</cron_expr>
                </schedule>
                <run>
                    <model>Marginframe_Apiregister/observer::checkvip_expire</model>
                </run>
            </checkvip_expire>
        </jobs>
    </crontab>
</config>
