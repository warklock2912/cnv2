if(!RedactorPlugins){var RedactorPlugins={}}(function(a){RedactorPlugins.imagemanager=function(){return{init:function(){if(!this.opts.imageManagerJson){return}this.modal.addCallback("image",this.imagemanager.load)},load:function(){var b=this.modal.getModal();this.modal.createTabber(b);this.modal.addTab(1,"Upload","active");this.modal.addTab(2,"Choose");a("#redactor-modal-image-droparea").addClass("redactor-tab redactor-tab1");var c=a('<div id="redactor-image-manager-box" style="overflow: auto; height: 300px;" class="redactor-tab redactor-tab2">').hide();b.append(c);a.ajax({dataType:"json",cache:false,url:this.opts.imageManagerJson,success:a.proxy(function(d){a.each(d,a.proxy(function(g,h){var f="";if(typeof h.title!=="undefined"){f=h.title}var e=a('<img src="'+h.thumb+'" rel="'+h.image+'" title="'+f+'" style="width: 100px; height: 75px; cursor: pointer;" />');a("#redactor-image-manager-box").append(e);a(e).click(a.proxy(this.imagemanager.insert,this))},this))},this)})},insert:function(b){this.image.insert('<img src="'+a(b.target).attr("rel")+'" alt="'+a(b.target).attr("title")+'">')}}}})(jQuery);