if(!RedactorPlugins){var RedactorPlugins={}}(function(a){RedactorPlugins.video=function(){return{reUrlYoutube:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/ig,reUrlVimeo:/https?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,getTemplate:function(){return String()+'<section id="redactor-modal-video-insert"><label>'+this.lang.get("video_html_code")+'</label><textarea id="redactor-insert-video-area" style="height: 160px;"></textarea></section>'},init:function(){var b=this.button.addAfter("image","video",this.lang.get("video"));this.button.addCallback(b,this.video.show)},show:function(){this.modal.addTemplate("video",this.video.getTemplate());this.modal.load("video",this.lang.get("video"),700);this.modal.createCancelButton();var b=this.modal.createActionButton(this.lang.get("insert"));b.on("click",this.video.insert);this.selection.save();this.modal.show();a("#redactor-insert-video-area").focus()},insert:function(){var d=a("#redactor-insert-video-area").val();if(!d.match(/<iframe|<video/gi)){d=this.clean.stripTags(d);var c='<iframe style="width: 500px; height: 281px;" src="',b='" frameborder="0" allowfullscreen></iframe>';if(d.match(this.video.reUrlYoutube)){d=d.replace(this.video.reUrlYoutube,c+"//www.youtube.com/embed/$1"+b)}else{if(d.match(this.video.reUrlVimeo)){d=d.replace(this.video.reUrlVimeo,c+"//player.vimeo.com/video/$2"+b)}}}this.selection.restore();this.modal.close();var e=this.selection.getBlock()||this.selection.getCurrent();if(e){a(e).after(d)}else{this.insert.html(d)}this.code.sync()}}}})(jQuery);